#TODO: Optimize this code architecture